{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(handleAppLoad),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(sendErrorMessage);\n\nimport { call, put } from 'redux-saga/effects';\nimport { getAuthToken, getDarkModePreference } from '../utils';\nimport { APP_LOAD_SUCCESS, APP_LOAD_FAILURE, ADD_MESSAGE } from '../../actions';\nimport { ACCESS_TOKEN_SUCCESS } from '../../actions/auth';\nimport { THEME_LIGHT_PREFERRED, THEME_DARK_PREFERRED } from '../../actions/theme';\nimport auth from './auth';\n\nfunction handleAppLoad() {\n  var authToken, DarkModePreference;\n  return _regeneratorRuntime.wrap(function handleAppLoad$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return call(getAuthToken);\n\n        case 3:\n          authToken = _context.sent;\n          _context.next = 6;\n          return call(getDarkModePreference);\n\n        case 6:\n          DarkModePreference = _context.sent;\n\n          if (!authToken) {\n            _context.next = 12;\n            break;\n          }\n\n          _context.next = 10;\n          return put({\n            type: ACCESS_TOKEN_SUCCESS\n          });\n\n        case 10:\n          _context.next = 12;\n          return call(auth.fetchUserClaims);\n\n        case 12:\n          if (!(DarkModePreference === 'true')) {\n            _context.next = 17;\n            break;\n          }\n\n          _context.next = 15;\n          return put({\n            type: THEME_DARK_PREFERRED,\n            payload: DarkModePreference\n          });\n\n        case 15:\n          _context.next = 20;\n          break;\n\n        case 17:\n          if (!(DarkModePreference === 'false')) {\n            _context.next = 20;\n            break;\n          }\n\n          _context.next = 20;\n          return put({\n            type: THEME_LIGHT_PREFERRED,\n            payload: DarkModePreference\n          });\n\n        case 20:\n          _context.next = 22;\n          return put({\n            type: APP_LOAD_SUCCESS\n          });\n\n        case 22:\n          _context.next = 28;\n          break;\n\n        case 24:\n          _context.prev = 24;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 28;\n          return put({\n            type: APP_LOAD_FAILURE,\n            payload: _context.t0\n          });\n\n        case 28:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 24]]);\n}\n\nfunction sendErrorMessage(e) {\n  return _regeneratorRuntime.wrap(function sendErrorMessage$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return put({\n            type: ADD_MESSAGE,\n            payload: _objectSpread(_objectSpread({}, e), {}, {\n              options: {\n                variant: 'error'\n              }\n            })\n          });\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nexport default {\n  sendErrorMessage: sendErrorMessage,\n  handleAppLoad: handleAppLoad\n};","map":null,"metadata":{},"sourceType":"module"}